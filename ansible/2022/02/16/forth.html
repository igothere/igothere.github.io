<!DOCTYPE html>
<html lang=" en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Ansible AWX사용해서 PC원격관리 해보기 | Elegantly Brilliantly</title>
<meta name="generator" content="Jekyll v4.3.2">
<meta property="og:title" content="Ansible AWX사용해서 PC원격관리 해보기">
<meta name="author" content="Eden">
<meta property="og:locale" content="en_US">
<meta name="description" content="AWX">
<meta property="og:description" content="AWX">
<link rel="canonical" href="http://igothere.github.io/jekyll-theme-yat/ansible/2022/02/16/forth.html">
<meta property="og:url" content="http://igothere.github.io/jekyll-theme-yat/ansible/2022/02/16/forth.html">
<meta property="og:site_name" content="Elegantly Brilliantly">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2022-02-16T00:00:00+00:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="Ansible AWX사용해서 PC원격관리 해보기">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Eden"},"dateModified":"2022-02-16T00:00:00+00:00","datePublished":"2022-02-16T00:00:00+00:00","description":"AWX","headline":"Ansible AWX사용해서 PC원격관리 해보기","mainEntityOfPage":{"@type":"WebPage","@id":"http://igothere.github.io/jekyll-theme-yat/ansible/2022/02/16/forth.html"},"url":"http://igothere.github.io/jekyll-theme-yat/ansible/2022/02/16/forth.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="shortcut icon" href="">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css">
  <link rel="stylesheet" href="/jekyll-theme-yat/assets/css/main.css">
  <script src="/jekyll-theme-yat/assets/js/main.js"></script><link type="application/atom+xml" rel="alternate" href="http://igothere.github.io/jekyll-theme-yat/feed.xml" title="Elegantly Brilliantly">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<!-- and it's easy to individually load additional languages -->
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/go.min.js"></script>



















<script>
// Init highlight js
document.addEventListener('DOMContentLoaded', function(event) {
  var els = document.querySelectorAll('pre code')

  function addLangData(block) {
    var outer = block.parentElement.parentElement.parentElement;
    var lang = block.getAttribute('data-lang');
    for (var i = 0; i < outer.classList.length; i++) {
      var cls = outer.classList[i];
      if (cls.startsWith('language-')) {
        lang = cls;
        break;
      }
    }
    if (!lang) {
      cls = block.getAttribute('class');
      lang = cls ? cls.replace('hljs ', '') : '';
    }
    if (lang.startsWith('language-')) {
      lang = lang.substr(9);
    }
    block.setAttribute('class', 'hljs ' + lang);
    block.parentNode.setAttribute('data-lang', lang);
  }

  function addBadge(block) {
    var enabled = ('true' || 'true').toLowerCase();
    if (enabled == 'true') {
      var pre = block.parentElement;
      pre.classList.add('badge');
    }
  }

  function handle(block) {
    addLangData(block);
    addBadge(block)
    hljs.highlightBlock(block);
  }

  for (var i = 0; i < els.length; i++) {
    var el = els[i];
    handle(el);
  }
});
</script>

<style>
  /* code language badge */
  pre.badge::before {
    content: attr(data-lang);
    color: #fff;
    background-color: #ff4e00;
    padding: 0 .5em;
    border-radius: 0 2px;
    text-transform: uppercase;
    text-align: center;
    min-width: 32px;
    display: inline-block;
    position: absolute;
    right: 0;
  }

  /* fix wrong badge display for firefox browser */
  code > table pre::before {
    display: none;
  }
</style>
</head>
<body>



























































































































<header class="site-header " role="banner">

  <div class="wrapper">
    <div class="site-header-inner">
<span class="site-brand"><a class="site-brand-inner" rel="author" href="/jekyll-theme-yat/">
  <img class="site-favicon" title="Elegantly Brilliantly" src="" onerror="this.style.display='none'">
  Elegantly Brilliantly
</a>
</span><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger">
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewbox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
              </svg>
            </span>
          </label>

          <div class="trigger">
<a class="page-link" href="/jekyll-theme-yat/about.html">ABOUT</a><a class="page-link" href="/jekyll-theme-yat/archives.html">ARCHIVES</a><a class="page-link" href="/jekyll-theme-yat/categories.html">CATEGORIES</a><a class="page-link" href="/jekyll-theme-yat/">HOME</a><a class="page-link" href="/jekyll-theme-yat/tags.html">TAGS</a>









<span class="page-link">



<div id="google_translate_element" style="display: none;">
</div>

<span class="ct-language">
  <ul class="list-unstyled ct-language-dropdown">
    
      <li>
        <a href="#" class="lang-select" data-lang="en">
          
          <img src="https://cdn.countryflags.com/thumbs/united-states-of-america/flag-400.png" title="English">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="fr">
          
          <img src="https://cdn.countryflags.com/thumbs/france/flag-400.png" title="French">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="zh-CN">
          
          <img src="https://cdn.countryflags.com/thumbs/china/flag-400.png" title="Chinese(Simple)">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ja">
          
          <img src="https://cdn.countryflags.com/thumbs/japan/flag-400.png" title="Japanese">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ko">
          
          <img src="https://cdn.countryflags.com/thumbs/south-korea/flag-400.png" title="Korean">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ru">
          
          <img src="https://cdn.countryflags.com/thumbs/russia/flag-400.png" title="Russian">
          
        </a>
      </li>
    
  </ul>
</span>

<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en',
    autoDisplay: false,
    layout: google.translate.TranslateElement.InlineLayout.VERTICAL
  }, 'google_translate_element');

  // Links to cross-origin destinations are unsafe
  var gll = document.getElementsByClassName('goog-logo-link')[0];
  if (gll) {
    gll.setAttribute('rel', 'noopener');
  }

  function restoreLang() {
    var iframe = document.getElementsByClassName('goog-te-banner-frame')[0];
    if (!iframe) return;

    var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
    var restore_el = innerDoc.getElementsByTagName("button");

    for (var i = 0; i < restore_el.length; i++) {
      if (restore_el[i].id.indexOf("restore") >= 0) {
        restore_el[i].click();
        var close_el = innerDoc.getElementsByClassName("goog-close-link");
        close_el[0].click();
        return;
      }
    }
  }

  function triggerHtmlEvent(element, eventName) {
    var event;
    if (document.createEvent) {
      event = document.createEvent('HTMLEvents');
      event.initEvent(eventName, true, true);
      element.dispatchEvent(event);
    } else {
      event = document.createEventObject();
      event.eventType = eventName;
      element.fireEvent('on' + event.eventType, event);
    }
  }

  var googleCombo = document.querySelector("select.goog-te-combo");
  var langSelect = document.querySelector('.ct-language');
  langSelect.addEventListener('click', function(event) {
    if (!event.target) {
      return;
    }

    var selected = document.querySelector('.ct-language .ct-language-selected');
    if (selected) {
      selected.classList.remove('ct-language-selected');
    }

    var target = event.target;
    while (target && target !== langSelect ) {
      if (target.matches('.lang-select')) {
        break;
      }
      target = target.parentElement;
    }

    if (target && target.matches('.lang-select')) {
      var lang = target.getAttribute('data-lang');
      if (googleCombo.value == lang) {
        restoreLang();
      } else {
        target.parentElement.classList.add('ct-language-selected');
        googleCombo.value = lang;
        triggerHtmlEvent(googleCombo, 'change');
      }
    }

    event.preventDefault();
  });
}
</script>

<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</span>
</div>
        </nav>
</div>
  </div>
</header>

<script>
  function initHeader() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;var scrollStatus = "";

      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }

      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }

    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });

    storeScrollData();
  }
  document.addEventListener('DOMContentLoaded', initHeader);
</script>
















































































































































<script>
  function hashLocate(hashValue) {
    hashValue = hashValue.replace(/^.*#h-/, '');
    hashValue = decodeURIComponent(hashValue);
    var element = document.getElementById(hashValue);

    if (!element) {
      return;
    }

    var header = document.querySelector('header.site-header');
    var headerRect = header.getBoundingClientRect();
    var headerTop = Math.floor(headerRect.top);
    var headerHeight = Math.floor(headerRect.height);
    var scrollPos = getScrollPos();
    var offsetY = element.offsetTop - (headerTop + headerHeight + 20);

    if (offsetY == scrollPos.y) {
      return;
    }

    if (headerTop == 0  && offsetY > scrollPos.y) {
      offsetY += headerHeight + 2;
    } else if (headerTop < 0  && offsetY < scrollPos.y) {
      offsetY -= headerHeight - 2;
    }

    smoothScrollTo(offsetY);
  }

  // The first event occurred
  window.addEventListener('load', function(event) {
    if (window.location.hash) {
      hashLocate(window.location.hash);
    }
  });

  // The first event occurred
  window.addEventListener('click', function(event) {
    if (event.target.tagName.toLowerCase() == 'a') {
      hashLocate(event.target.getAttribute('href'));
    }
  });
</script>
<div class="theme-toggle">
  <input type="checkbox" id="theme-switch">
  <label for="theme-switch">
    <div class="toggle"></div>
    <div class="names">
      <p class="light">Light</p>
      <p class="dark">Dark</p>
    </div>
  </label>
</div>




<script>
  (function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var nightModeOption = ('auto' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
      storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
      var data = storage.getItem('theme');
      try {
        data = JSON.parse(data ? data : '');
      } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
      }
      return data;
    }

    function handleThemeToggle(nightShift) {
      themeData.nightShift = nightShift;
      saveThemeData(themeData);
      html.dataset.theme = nightShift ? 'dark' : 'light';
      setTimeout(function() {
        sw.checked = nightShift ? true : false;
      }, 50);
    }

    function autoThemeToggle() {
      // Next time point of theme toggle
      var now = new Date();
      var toggleAt = new Date();
      var hours = now.getHours();
      var nightShift = hours >= 19 || hours <=7;

      if (nightShift) {
        if (hours > 7) {
          toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
      } else {
        toggleAt.setHours(19);
      }

      toggleAt.setMinutes(0);
      toggleAt.setSeconds(0);
      toggleAt.setMilliseconds(0)

      var delay = toggleAt.getTime() - now.getTime();

      // auto toggle theme mode
      setTimeout(function() {
        handleThemeToggle(!nightShift);
      }, delay);

      return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
      };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
      handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
      var data = autoThemeToggle();

      // Toggle theme by local setting
      if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
      } else {
        handleThemeToggle(themeData.nightShift);
      }
    } else if (nightModeOption == 'manual') {
      handleThemeToggle(themeData.nightShift);
    } else {
      var nightShift = themeData.nightShift;
      if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
      }
      handleThemeToggle(nightShift);
    }
  })();
</script>
<main class="page-content" aria-label="Content">
    <div class="wrapper">
      <div class="framework">
  <section class="main">

     <div class="post">
  <section>









<header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">Ansible AWX사용해서 PC원격관리 해보기</h1>
  <h2 class="post-subtitle">Ansible AWX</h2>

  <p class="post-meta">
    <time class="dt-published" datetime="2022-02-16T00:00:00+00:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Feb 16, 2022
    </time>

    
    
































    <span class="post-reading-time left-vsplit"><i class="fa fa-clock-o"></i> About 1 min</span>
  </p>
<div class="post-tags">
<a class="post-tag" href="/jekyll-theme-yat/tags.html#ansible">#ansible</a><a class="post-tag" href="/jekyll-theme-yat/tags.html#awx">#awx</a>
</div></header>
<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="post-content e-content" itemprop="articleBody">

      <h1 id="awx">AWX</h1>

<p>먼저 awx가 설치되어있는 환경에서 awx를 통해 원격관리를 하기 위한 기본 설정에 대해서 설명한다.</p>

<ol>
  <li>Project 등록
프로젝트는 awx 설정 파일에서 먼저 주석해제후 내가 원하는 경로로 지정해주면 된다.
프로젝트의 용도는 미리 플레이북을 만들어 프로젝트 디렉토리에 넣은 후 사용하기 위함이다.
17.1.0 버전 기준으로 아래 화면과 같다.</li>
</ol>

<p><img src="https://boostnote.io/api/teams/i8xSRJrmd/files/2c1b912e8407249306fa11c6e80bdd9e5352ed7da6ca3e479661c913e0c1a541-awx-project.png" alt="awx-project.png"></p>

<ol>
  <li>Credential 관리
원격pc에 원할하게 접속하기 위해 미리 인증정보 같은 것들을 입력해 놓는 곳이다.
먼저 나는 일반 pc를 관리 할거 니깐 Credential Type 에서 Machine을 선택하고
관리대상pc의 계정정보를 입력한다.
SSH Private Key는 awx가 설치되어 있는 서버의 key를 가져오면 된다.
key 생성명령어는</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen -t rsa
</code></pre></div></div>
<p>명령어를 입력하면 3개의 값을 입력하라고 나오는데 특별한 이유가 없다면 그냥 엔터로 넘어가는게 좋다.</p>
<ol>
  <li>키를 저장할 경로( 기본값 : $HOME/.ssh/id_rsa)</li>
  <li>passphrase (추가로 사용할 암호, 기본값 없음)</li>
  <li>passphrase 확인</li>
</ol>

<p>key생성이 완료되면 $HOME/.ssh 경로에 id_rsa와 id_rsa.pub이란 파일이 생성되는데 awx에서 SSH Private Key 입력은 id_rsa를 vi나 nano 편집기로 열어서 전체 복사해서 입력해주면 된다.
마지막으로 원격관리할 pc에서 sudo 권한이 필요할수도 있으니 맨 마지막 Privilege Escalation Password에 계정 비밀번호를 입력해준다.</p>
<h4 id="여기서-중요한점은-원격pc의-계정이-sudo권한이-있어야지만-awx에서-사용할-수-있다">여기서 중요한점은 원격pc의 계정이 sudo권한이 있어야지만 awx에서 사용할 수 있다.</h4>
<p>sudo 권한은 sudo usermod -aG sudo $USER로 주거나 /etc/sudoers 파일에 awx ALL=(ALL:ALL) ALL 추가해주면 된다. 화면은 아래와 같다.
<img src="https://boostnote.io/api/teams/i8xSRJrmd/files/5885eee6a5e5d53340cc57f85418b8c4de092cf6cc3eda16a482e51a1a1d7bfd-awx-credential.png" alt="awx-credential.png"></p>

<ol>
  <li>
    <p>Inventory 관리
인벤토리는 관리할 pc들의 group및 host정보를 저장해 놓는 곳이다.
크게 설명할 부분은 없고 아래 화면같이 group탭과 Hosts탭에서 그룹명과 HostIP를 입력해 놓으면 된다.
<img src="https://boostnote.io/api/teams/i8xSRJrmd/files/5d6f50b4e74a0dcb4a1e1d1906954724ba0d17d0cecd6899d8e4f776b4ce0dd5-awx-inventory.png" alt="awx-inventory.png">
<img src="https://boostnote.io/api/teams/i8xSRJrmd/files/c81563dfb6c7d949dd219c2dd5a00e3b6cec5a20c9edc351f0b1b9499f1e6f08-awx-inven-groups.png" alt="awx-inven-groups.png">
<img src="https://boostnote.io/api/teams/i8xSRJrmd/files/7fb8eef3d2227a7a78eaa9c6c3d34aa8751a4c8b5ef1a895f2eadefbe42f4301-awx-inven-hosts.png" alt="awx-inven-hosts.png"></p>
  </li>
  <li>
    <p>간단한 ad_hoc_commands 테스트</p>
  </li>
</ol>

<p>인벤토리의 Hosts탭으로 이동 후 명령을 내릴 pc를 체크 한 후 Run Command 버튼을 클릭한다.
<img src="https://boostnote.io/api/teams/i8xSRJrmd/files/73450561373616aa7dec1731d595ad79afc3c2a5fe49c829028513d53ed6358e-awx-adhook.png" alt="awx-adhook.png">
첫번째 Module은 ping으로 넣어주고 Next 버튼을 클릭</p>

<p>두번쨰 Machine credential은 미리 등록해 놓은 credential 을 체크 한후 Launch 버튼을 클릭
<img src="https://boostnote.io/api/teams/i8xSRJrmd/files/3cf9b26fb43fcbfe2f21507a70f5ead87805aeaa90ba44dbc8d7ce495c236ada-awx-adhook-credential.png" alt="awx-adhook-credential.png">
성공하면 아래와 같은 성공로그가 나온다.
<img src="https://boostnote.io/api/teams/i8xSRJrmd/files/001640ab5041a3b8ba3f54b5b798235b5101c56570c3e369973fff06e72ad093-awx-job.png" alt="awx-job.png"></p>

<h3 id="이렇게-asible-awx를-사용하여-pc관리를-해보자">이렇게 Asible AWX를 사용하여 PC관리를 해보자!</h3>


    </div>

</article>
<div class="post-nav">
<a class="previous" href="/jekyll-theme-yat/spring/2022/01/27/third.html" title="spring에서 Webclient 사용하여 RestApi 통신 하기">spring에서 Webclient 사용하여 RestApi 통신 하기...</a><a class="next" href="/jekyll-theme-yat/postgresql/2022/03/28/fifth.html" title="postgresql db 이중화 1">postgresql db 이중화 1</a>
</div>
<div class="post-related">
      <div>Related Articles</div>
      <ul>
        <li><a class="post-link" href="/jekyll-theme-yat/postgresql/2022/03/28/fifth.html" title="postgresql db 이중화 1">postgresql db 이중화 1</a></li>
<li><a class="post-link" href="/jekyll-theme-yat/sbom/2023/02/09/tenth.html" title="postgresql db 이중화 1">국내 SBOM 속성 규격</a></li>
<li><a class="post-link" href="/jekyll-theme-yat/postgresql/2022/03/29/sixth.html" title="postgresql db 이중화 1">postgresql db 이중화 2</a></li>
<li><a class="post-link" href="/jekyll-theme-yat/spring/2022/01/27/third.html" title="postgresql db 이중화 1">spring에서 Webclient 사용하여 RestApi 통신 하기</a></li>
</ul>
    </div>
<div class="post-comments"></div></section>
</div>


  </section>
  <section class="sidebar" style="margin-left: 15px;">
    <!-- Get sidebar items --></section>
</div>

    </div>
  </main><footer class="site-footer h-card">
  <data class="u-url" href="/jekyll-theme-yat/"></data>

  <div class="wrapper">
    <div class="site-footer-inner">
<div>Unpublished Work <span class="copyleft">©</span> 2017-2023 Eden</div>
      <div>Powered by <a title="Jekyll is a simple, blog-aware, static site
      generator." href="http://jekyllrb.com/">Jekyll</a> &amp; <a title="Yat, yet
      another theme." href="https://github.com/jeffreytse/jekyll-theme-yat">Yat Theme</a>.</div>
      <div class="footer-col rss-subscribe">Subscribe <a href="/jekyll-theme-yat/feed.xml">via RSS</a>
</div>
    </div>
  </div>
</footer>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2780237611433482" crossorigin="anonymous"></script>
</body>

</html>
